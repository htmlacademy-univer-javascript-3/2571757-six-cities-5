import{j as s,r,u as o,s as f,S as u,O as h,a as _,b as n,c as x,d as j,C as N,e as O}from"./index-1a77823f.js";import{M as v}from"./index-41b19c9d.js";const y=()=>s.jsx("section",{className:"cities__no-places",children:s.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[s.jsx("b",{className:"cities__status",children:"No places to stay available"}),s.jsx("p",{className:"cities__status-description",children:"We could not find any property available at the moment in Dusseldorf"})]})}),g=({offers:e})=>{const[i,c]=r.useState(void 0),t=o(f),a=e.length,d=a===0,p=r.useCallback(l=>{c(l)},[]),m=r.useMemo(()=>e.find(l=>l.id===i),[e,i]);return s.jsx("div",{className:"cities",children:s.jsxs("div",{className:`cities__places-container container ${d&&"cities__places-container--empty"}`,children:[d?s.jsx(y,{}):s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[a," places to stay in ",t]}),s.jsx(u,{}),e.length&&s.jsx(h,{offers:e,type:"default",onOfferHover:p})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx("section",{className:"cities__map",children:e.length&&s.jsx(v,{offers:e,activeCityName:t,selectedOffer:m})})})]})})},S=e=>{const i=o(_);return r.useMemo(()=>[...e].sort((t,a)=>{switch(i){case n.LowToHigh:return t.price-a.price;case n.HighToLow:return a.price-t.price;case n.TopRatedFirst:return a.rating-t.rating;case n.Popular:return 0}}),[e,i])},H=()=>{const{offers:e,loading:i}=o(x),{fetchOffers:c}=j(),t=o(f);r.useEffect(()=>{c()},[c,t]);const a=S(e);return s.jsxs("main",{className:"page__main page__main--index",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(N,{}),i?s.jsx(O,{size:"l"}):s.jsx(g,{offers:a})]})};export{H as default};
