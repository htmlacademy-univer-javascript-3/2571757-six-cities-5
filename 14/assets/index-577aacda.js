import{u as p,f as u,c as d,r as o,_ as N,j as s,h as c,g as w,i as m,k as S,A as b,l as y}from"./index-148b671a.js";const C=()=>{const{authorizeStatus:{loading:t,error:n,validationErrors:e}}=p(u),{authorize:i}=d(),[a,h]=o.useState({email:"",password:""});o.useEffect(()=>{n&&N.error(n)},[n]);const r=l=>{const{name:f,value:x}=l.target;h(j=>({...j,[f]:x}))},_=l=>{l.preventDefault(),a.email&&a.password&&i(a)},g=!a.email||!a.password;return s.jsxs("form",{className:"login__form form",action:"#",method:"post",onSubmit:_,children:[s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"E-mail"}),s.jsx("input",{className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!1,onChange:r}),(e==null?void 0:e.email)&&s.jsx("p",{className:c.error,children:e==null?void 0:e.email})]}),s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"Password"}),s.jsx("input",{className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!1,onChange:r}),(e==null?void 0:e.password)&&s.jsx("p",{className:c.error,children:e==null?void 0:e.password})]}),s.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:g,children:t?s.jsx(w,{size:"s",type:"inline",preset:"white"}):"Sign in"})]})},k=()=>m[Math.floor(Math.random()*m.length)],A="_link_1rjeq_1",z={link:A},R=()=>{const{changeCity:t}=d(),{authorizationStatus:n}=p(u),e=S(),i=k();o.useEffect(()=>{n===b.Authorized&&e(-1)},[e,n]);const a=()=>{t(i),e(y.Default)};return s.jsx("main",{className:"page__main page__main--login",children:s.jsxs("div",{className:"page__login-container container",children:[s.jsxs("section",{className:"login",children:[s.jsx("h1",{className:"login__title",children:"Sign in"}),s.jsx(C,{})]}),s.jsx("section",{className:"locations locations--login locations--current",children:s.jsx("div",{className:`locations__item locations__item-link ${z.link}`,onClick:a,children:s.jsx("span",{children:i})})})]})})};export{R as default};
