import{j as s,r,u as c,s as u,S as m,O as h,a as _,b as l,c as x,d as j,e as N,f as v,_ as O,C as g,g as y}from"./index-148b671a.js";import{M as S}from"./index-4a00b2f9.js";const C=()=>s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container cities__places-container--empty container",children:[s.jsx("section",{className:"cities__no-places",children:s.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[s.jsx("b",{className:"cities__status",children:"No places to stay available"}),s.jsx("p",{className:"cities__status-description",children:"We could not find any property available at the moment in Dusseldorf"})]})}),s.jsx("div",{className:"cities__right-section"})]})}),b=({offers:e})=>{const[i,n]=r.useState(void 0),a=c(u),t=e.length,o=t===0,d=r.useCallback(f=>{n(f)},[]),p=r.useMemo(()=>e.find(f=>f.id===i),[e,i]);return o?s.jsx(C,{}):s.jsx("div",{className:"cities",children:s.jsxs("div",{className:`cities__places-container container ${o&&"cities__places-container--empty"}`,children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[t," places to stay in ",a]}),s.jsx(m,{}),e.length&&s.jsx(h,{offers:e,type:"default",onOfferHover:d})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx("section",{className:"cities__map",children:e.length&&s.jsx(S,{offers:e,activeCityName:a,selectedOffer:p})})})]})})},E=e=>{const i=c(_);return r.useMemo(()=>[...e].sort((a,t)=>{switch(i){case l.LowToHigh:return a.price-t.price;case l.HighToLow:return t.price-a.price;case l.TopRatedFirst:return t.rating-a.rating;case l.Popular:return 0}}),[e,i])},M=()=>{const{fetchOffers:e}=x(),i=c(u),{offers:n,loading:a}=c(j),{postStatus:{error:t}}=c(N),{authorizationStatus:o}=c(v);r.useEffect(()=>{e()},[e,i,o]),r.useEffect(()=>{t&&O.error(t)},[t]);const d=E(n);return s.jsxs("main",{className:"page__main page__main--index",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(g,{}),a?s.jsx(y,{size:"l"}):s.jsx(b,{offers:d})]})};export{M as default};
