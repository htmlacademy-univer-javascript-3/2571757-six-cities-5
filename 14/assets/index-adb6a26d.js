import{u as p,f as u,d,r as o,_ as N,j as e,g as c,e as w,h as m,i as S,A as b,k as y}from"./index-1a77823f.js";const C=()=>{const{authorizeStatus:{loading:t,error:n,validationErrors:s}}=p(u),{authorize:i}=d(),[a,h]=o.useState({email:"",password:""});o.useEffect(()=>{n&&N.error(n)},[n]);const r=l=>{const{name:f,value:x}=l.target;h(j=>({...j,[f]:x}))},_=l=>{l.preventDefault(),a.email&&a.password&&i(a)},g=!a.email||!a.password;return e.jsxs("form",{className:"login__form form",action:"#",method:"post",onSubmit:_,children:[e.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[e.jsx("label",{className:"visually-hidden",children:"E-mail"}),e.jsx("input",{className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!1,onChange:r}),(s==null?void 0:s.email)&&e.jsx("p",{className:c.error,children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[e.jsx("label",{className:"visually-hidden",children:"Password"}),e.jsx("input",{className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!1,onChange:r}),(s==null?void 0:s.password)&&e.jsx("p",{className:c.error,children:s==null?void 0:s.password})]}),e.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:g,children:t?e.jsx(w,{size:"s",type:"inline",preset:"white"}):"Sign in"})]})},k=()=>m[Math.floor(Math.random()*m.length)],A="_link_1rjeq_1",z={link:A},R=()=>{const{changeCity:t}=d(),{authorizationStatus:n}=p(u),s=S(),i=k();o.useEffect(()=>{n===b.Authorized&&s(-1)},[s,n]);const a=()=>{t(i),s(y.Default)};return e.jsx("main",{className:"page__main page__main--login",children:e.jsxs("div",{className:"page__login-container container",children:[e.jsxs("section",{className:"login",children:[e.jsx("h1",{className:"login__title",children:"Sign in"}),e.jsx(C,{})]}),e.jsx("section",{className:"locations locations--login locations--current",children:e.jsx("div",{className:`locations__item locations__item-link ${z.link}`,onClick:a,children:e.jsx("span",{children:i})})})]})})};export{R as default};
